(function(){var a,b,c,d,e,f;a=jQuery,c=[],d=0,b=function(){function b(b){this.el=b,this.index=d++,this.text=a(this.el).text(),a(this.el).attr("data-text",this.text),this.words=this.text.trim().split(" "),this.lines=parseInt(a(this.el).attr("data-truncate")),this.truncate(),this.adjustOnResize()}return b.prototype.truncate=function(){return this.measure(),this.setContent()},b.prototype.reset=function(){return a(this.el).text(this.text).css("max-height","none").attr("data-truncated","false")},b.prototype.measure=function(){var b;for(this.reset(),a(this.el).html("."),this.singleLineHeight=a(this.el).outerHeight(),b=1;b++<this.lines;)a(this.el).append("<br>.");return this.maxLinesHeight=a(this.el).outerHeight()},b.prototype.empty=function(){return a(this.el).html("")},b.prototype.setContent=function(){var b;return this.reset(),b=!1,this.addWords(this.words.length),this.tooBig()?(this.addNumberWordsThatFit(),a(this.el).css("max-height",this.maxLinesHeight+"px"),a(this.el).attr("data-truncated",!0)):void 0},b.prototype.addNumberWordsThatFit=function(){var b,c,d;for(c=this.words.length,b=0,d=Math.floor(this.words.length/2);b+1!==c;)this.addWords(b+d),this.tooBig()?c=b+d:b+=d,d=Math.floor(d/2)||1;return this.addWords(b),a(this.el).html(this.trimTrailingPunctuation(a(this.el).html()))},b.prototype.addWords=function(b){return a(this.el).html(this.words.slice(0,b).join(" "))},b.prototype.tooBig=function(){return a(this.el).outerHeight()>this.maxLinesHeight},b.prototype.adjustOnResize=function(){var b=this;return a(window).on("resize",function(){return clearTimeout(c[b.index]),c[b.index]=setTimeout(function(){return b.truncate()},20)})},b.prototype.trimTrailingPunctuation=function(a){return a.replace(/(,$)|(\.$)|(\:$)|(\;$)|(\?$)|(\!$)/g,"")},b}(),e=!1,f=[],a.fn.truncateLines=function(){return e||a("head").append('<style type="text/css">[data-truncated="true"] { overflow: hidden; }[data-truncated="true"]:after { content: "..."; position: absolute; }</style>'),this.each(function(){return f.push(new b(this))})},a(window).load(function(){return a("[data-truncate]").truncateLines()})}).call(this);